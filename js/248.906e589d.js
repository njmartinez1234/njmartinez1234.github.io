"use strict";(self["webpackChunkvue_login_signup_ui"]=self["webpackChunkvue_login_signup_ui"]||[]).push([[248],{6098:function(e,t,a){a.d(t,{Z:function(){return u}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{attrs:{id:"modal-center",centered:""},model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[a("p",[e._v(e._s(e.text))])])},n=[],o={props:{value:{type:Boolean,required:!0},text:{type:String,required:!0}},computed:{isOpen:{get(){return this.value},set(e){this.$emit("input",e)}}}},i=o,r=a(1001),l=(0,r.Z)(i,s,n,!1,null,null,null),u=l.exports},3248:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("OverlayComponent",{attrs:{show:e.loggedIn}},[e.loggedIn?e._e():a("div",{staticClass:"inner-block"},[a("div",[a("ModalDialog",{attrs:{text:e.modalText},model:{value:e.isModalOpen,callback:function(t){e.isModalOpen=t},expression:"isModalOpen"}})],1),a("div",{staticClass:"container"},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-md-12"},[a("h1",{staticClass:"text-center"},[e._v("Login")]),a("OverlayComponent",{attrs:{show:e.showOverlaySignIn}},[a("form",{staticClass:"mt-4",on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[a("div",{staticClass:"form-group fixed-form-margin"},[a("label",{attrs:{for:"email"}},[e._v("Email:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"email",required:"",placeholder:"user@mail.com"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),a("div",{staticClass:"form-group fixed-form-margin"},[a("label",{attrs:{for:"password"}},[e._v("Password:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:"Password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e.error?a("p",{staticClass:"text-danger"},[e._v(" Has introducido mal el email o la contraseña. ")]):e._e(),a("button",{staticClass:"btn btn-outline-primary fixed-form-margin",attrs:{type:"submit"}},[e._v("Login")])]),a("p",{staticClass:"mt-3"},[e._v(" ¿Don't have an account? "),a("router-link",{attrs:{to:"/signup"}},[e._v("Signup")])],1)])],1)])])])])},n=[],o=a(1801),i=a(6098),r=a(8341),l={components:{ModalDialog:i.Z,OverlayComponent:r.Z},data:()=>({email:"",password:"",error:!1,showOverlaySignIn:!1,showOverlayIsLogedIn:!1,modalText:"",isModalOpen:!1}),beforeRouteEnter(e,t,a){const s="true"===localStorage.getItem("loggedIn");s?a("/operations"):a()},computed:{loggedIn(){return"true"===localStorage.getItem("loggedIn")}},methods:{login(){this.showOverlaySignIn=!this.showOverlaySignIn,o.Z.signin(this.email,this.password).then((e=>{this.$eventBus.token=e.data.access_token,this.$eventBus.userBalance=e.data.user.balance,this.$eventBus.userName=e.data.user.username,this.$eventBus.loggedIn="true",this.$router.push("/operations")})).catch((e=>{this.openModal(e.response.data.message)})).finally((()=>{this.showOverlaySignIn=!this.showOverlaySignIn}))},openModal(e){this.isModalOpen=!0,this.modalText=e}}},u=l,d=a(1001),p=(0,d.Z)(u,s,n,!1,null,null,null),c=p.exports}}]);
//# sourceMappingURL=248.906e589d.js.map